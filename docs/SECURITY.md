## الأمن والصلاحيات / Security & Permissions

هذا المستند يوضح ممارسات الأمان المطبقة وأدوار النظام.

---

### المصادقة / Authentication
- JWT Bearer في ترويسة `Authorization`.
- مدة صلاحية وتدوير مفاتيح JWT يُنصح به في الإنتاج.
- كلمة السر تُخزَّن مُشفّرة عبر `bcryptjs`.

---

### التفويض / Authorization
أدوار رئيسية:
- `student`: وصول لبياناته، الاستبيانات، التوصيات، الطلبات.
- `teacher`: الوصول لطلابه وإضافة ملاحظات متابعة.
- `university`: إدارة تخصصات الجامعة وطلبات القبول والمقابلات.
- `admin`: تحكم كامل، إعدادات النظام والذكاء الاصطناعي.

وسطاء حماية:
- `authenticate`: يتحقق من JWT ويحقن `req.user`.
- `isAdmin`, `isTeacher`, `isUniversity`, `isStudent`: تحكم بالوصول على مستوى المسارات.

---

### أفضل الممارسات / Best Practices
- استخدم HTTPS دائماً.
- خزّن الأسرار في متغيرات البيئة أو Secret Manager.
- عيّن `JWT_SECRET` قوي وفريد لكل بيئة.
- فعّل CORS المُقيَّد بالمصدر الموثوق.
- راقب سجلات التدقيق `AuditLogs`.
- قم بتفعيل حد المعدّل (Rate Limiting) وCSRF للواجهات ذات الحالة إن لزم.

---

### سجلات التدقيق / Audit Logging
- يتم تسجيل عمليات القراءة/الإنشاء/التعديل/الحذف مع: المستخدم، الكيان، الوصف، IP، وكيل المستخدم.
- راجع `middleware/logger.js` وجدول `AuditLogs`.


